<dialog #dialogRef class="backdrop:bg-black/50 backdrop:backdrop-blur-sm rounded-lg shadow-xl p-6 w-full max-w-md">
  <form [formGroup]="form" (ngSubmit)="onSubmit()" class="space-y-4">
    <h2 class="text-xl font-semibold mb-4">Create Learner</h2>
    
    <div class="space-y-2">
      <label class="block text-sm font-medium">
        Name
        <input 
          formControlName="studentName" 
          type="text" 
          class="mt-1 block w-full rounded-md border border-gray-300 px-3 py-2"
          required
        />
      </label>
    </div>

    <div class="space-y-2">
      <label class="block text-sm font-medium">
        Student ID (Auto-generated)
        <div class="mt-1 flex gap-2">
          <input 
            [value]="generatedStudentId()"
            type="text" 
            readonly
            class="block w-full rounded-md border border-gray-300 px-3 py-2 bg-gray-100"
          />
          <button
            type="button"
            (click)="generateStudentId()"
            class="px-3 py-2 rounded-md border border-gray-300 hover:bg-gray-50 text-sm"
            title="Generate new ID"
          >
            ðŸ”„
          </button>
        </div>
        <p class="text-xs text-gray-500 mt-1">8-digit unique ID (click to regenerate)</p>
      </label>
    </div>

    <div class="space-y-2">
      <label class="block text-sm font-medium">
        Class
        <select 
          formControlName="classId" 
          class="mt-1 block w-full rounded-md border border-gray-300 px-3 py-2"
          required
        >
          <option value="">Select a class</option>
          @for (cls of classes(); track cls.classId) {
            <option [value]="cls.classId">{{ cls.name }} ({{ cls.classId }})</option>
          }
        </select>
      </label>
    </div>

    <div class="flex gap-2 justify-end mt-6">
      <button 
        type="button" 
        (click)="closeDialog()"
        class="px-4 py-2 rounded-md border border-gray-300 hover:bg-gray-50"
      >
        Cancel
      </button>
      <button 
        type="submit" 
        [disabled]="form.invalid"
        class="px-4 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"
      >
        Submit
      </button>
    </div>
  </form>
</dialog>
